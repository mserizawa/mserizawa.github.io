"use strict";var vm=new Vue({el:"#app",data:{searchQuery:"",itemOffset:0,items:[],filteredItems:[],selectedItem:{}},methods:{chunk:function(t,e){for(var i=t.concat(),r=[];i.length>0;)r.push(i.splice(0,e));return r},filterByQuery:function(){this.itemOffset=0;var t=this.searchQuery;if(""===t)return void(this.filteredItems=[]);var e=0===t.indexOf("tag:");this.filteredItems=this.items.filter(function(i){return e?i.tags&&-1!==i.tags.indexOf(t.substr(4)):-1!==i.title.toLowerCase().indexOf(t.toLowerCase())?!0:!(!i.tags||-1===i.tags.join("|").toLowerCase().indexOf(t.toLowerCase()))})},showModal:function(t){this.selectedItem=t,$(".modal").modal()},getItemAtRandom:function(){return this.items[Math.floor(Math.random()*this.items.length)]},searchByTag:function(t){this.searchQuery="tag:"+t,this.filterByQuery()}},computed:{resultLengthWithCommas:function(){return this.filteredItems.length.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},hasMore:function(){return this.filteredItems.length>10*(this.itemOffset+1)}},created:function(){$.getJSON("jsons/items.json",function(t){t.forEach(function(t){var e=moment(t.date),i="";i=e.year()<2e3?e.format("YYMMDD"):e.format("YYYYMMDD");var r=i.substr(0,i.length-2);t.thumbURL="http://www.ibiblio.org/Dave/Dr-Fun/inline/thumbs/tn"+i+".jpg",t.imageURL="http://www.ibiblio.org/Dave/Dr-Fun/df"+r+"/df"+i+".jpg",t.fullYMD=e.format("YYYYMMDD")}),vm.$set("items",t)})}});